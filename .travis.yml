# Use Python 3.5 for our tooling
language: python
python:
  - "3.5"
sudo: required
services:
  - docker
matrix:
  # Donâ€™t wait for jobs that are allowed to fail
  fast_finish: true
env:
  matrix:
    - EMACS_VERSION=24.4
    - EMACS_VERSION=24.5
    - EMACS_VERSION=25.1
before_install:
  - docker pull larsbrinkhoff/emacsen
  - sudo rm /usr/local/bin/docker-compose
  - curl -L https://github.com/docker/compose/releases/download/1.8.1/docker-compose-`uname -s`-`uname -m` > docker-compose
  - chmod +x docker-compose
  - sudo mv docker-compose /usr/local/bin
  - if [[ -n $EMACS_VERSION ]]; then docker-compose run app emacs --version; fi
script:
  # Compile and test
  - if [[ -n $EMACS_VERSION ]]; then docker-compose run app make travis; fi
notifications:
  webhooks:
    urls:
      - https://webhooks.gitter.im/e/efdc5fd9433efa7c6b80
    on_success: change
    on_failure: always
    on_start: never
